<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
  <META name="robots" content="noindex, nofollow">
  <TITLE>The site_config file</TITLE>
</HEAD>
 
<BODY BGCOLOR="#FFFBF0">

<H1><A NAME="intro">The site_config file</A></H1>
<P>When we say "the site_config file", we are actually referring to the file in
the site_config directory that corresponds to your system.<BR>
The name of this file is given to you when you run configure, although you can
probably guess what it is on most systems.

<P>The site_config file contains information specific to your compiler.  Here
are the entries in the file:

<DL>
<DL>
<P><DT>
<A HREF="#F90">F90</A>
<DD>
Which of the FFAST, FDEBUG and FPROF options you wish to use, or none at all.
<P><DT>
<A HREF="#FFLAGS">FFLAGS</A>
<DD>
These are necessary options for the compiler.<BR>
E.g., they may specify the C preprocessor and the module and include
directories.
<P><DT>
<A HREF="#FFAST">FFAST</A>
<DD>
These options tell the compiler about optimising the program to run faster.
<P><DT>
<A HREF="#FDEBUG">FDEBUG</A>
<DD>
These flags are for inserting debugging code into the program.
<P><DT>
<A HREF="#FPROF">FPROF</A>
<DD>
These flags are for timing routines in the program.
</DL>
</DL>

<P>The F90 variable is assigned with the "=" assignment.  The others use ":=".
This is done to speed up the make program.

<P><B>You will need your Fortran compiler manual for the specific options
relevent for your system.</B>

<H2><A NAME="F90">The F90 variable</A></H2>

<P>The F90 variable controls which options you wish to use to compile TONTO.<BR>
Any combination of the FFAST, FDEBUG and FPROF options can be used, or none at
all.

<BR>The most common choices are :-
<DIR>
<TABLE COLS=3>
<TR>
<TD WIDTH=180>F90 = </TD>
<TD>The easy option.</TD>
</TR>
<TR>
<TD>F90 = $(FFAST)</TD>
<TD>Will produce the fastest program.<BR>
    (This is the default, and probably what you want)</TD>
</TR>
<TR>
<TD>F90 = $(FDEBUG)</TD>
<TD>Will help track down bugs.<BR>
    (For developers, will run slowly)</TD></TR>
<TR>
<TD>F90 = $(FPROF)</TD>
<TD>You can time individual routines.<BR>
    (For developers, will run very slowly)</TD>
</TR>
<TR>
<TD>F90 = $(FFAST) $(FPROF)</TD>
<TD>Timing of an optimised program.<BR>
    (For developers, will run fairly fast)</TD>
</TR>
</TABLE>
</DIR>

<H2><A NAME="FFLAGS">The FFLAGS variable</A></H2>

<P>The FFLAGS variable must be set to the basic option flags that are needed to
compile TONTO. For example,
<PRE>
FFLAGS    := -cpp -module ./new_modules  \
             -I. -I./f90 -I./interfaces -I./modules -I./objects
</PRE>
This line consists of the FFLAGS variable, followed by an assignment operator,
:=, followed by the list of standard options which the compiler is to use.
The \ character tells make that the options continue on the next line, so that
the site_config file is easier to read.

<P>To get TONTO to compile and work, Fortran compiler options must be found for
the tasks described below.

<UL>
<LI>All the module files from the compilation must be deposited in
the module subdirectory, ./new_modules. In the above example,
this was achieved by the compiler flags: 
<PRE>
   -module ./new_modules
</PRE>
</LI>
<LI>The compiler must know where Fortran files, module information files,
and object files reside during intermediate stages of compilation. 
In the example above, this is given by (respectively) the options
<PRE>
   -I./f90 -I./modules -I./objects
</PRE>
</LI>
<LI>The Fortran code must be preprocessed using the C preprocessor
before being compiled by the Fortran compiler. In the example above
this was achieved by the compiler option
<PRE>
   -cpp
</PRE>
Furthermore, the C preprocessor must be given the names of certain
directories that it needs, in order to include the appropriate files.
In the example above this is achieved by the following compiler options,
<PRE>
   -I. -I./interfaces
</PRE>
</LI>
</UL>

<P>See the <A HREF="compilers.html">compilers</A> page for more information about
FFLAGS.

<H2><A NAME="FFAST">The FFAST variable</A></H2>

<P>The FFAST variable must be set to the options flags that are needed to
compile TONTO with as high a degree of optimisation as is reasonably possible.
For example,
<PRE>
FFAST  := -g0 -O
</PRE>
In this case, the -g0 option indicates that no debugging information is to be
used.  The -O indicates that the compiler performs additional optimisation.
Your compiler probably has many optimisation options, see your manual.

<H2><A NAME="DEBUG">The FDEBUG variable</A></H2>

<P>The FDEBUG variable must be set to the flags that are needed to compile
TONTO with full debugging switched on.  For example,
<PRE>
FDEBUG := -g -O0
</PRE>
In this case, the -g option indicates that full debugging information is to be
used.  The -O0 option indicates that there is to be no optimisation used, which
makes debugging more accurate.  Your compiler may support using a higher level
-g flag, such as -g3.  Consult your manual.

<P>There may be additional options for your compiler.  The Compaq and DEC compilers can compile with -ladebug, to allow the ladebug debugger to be used.

<H2><A NAME="FPROF">The FPROF variable</A></H2>

<P>The FPROF variable must be set to the flags that are needed in order to
perform profiling tests on TONTO programs.  That is, tests which examine the
speed of execution of various routines in TONTO.  For example,
<PRE>
FPROF  := -p -gen_feedback
</PRE>

<P>Profiling tests are often done in conjunction with the highest levels of
optimisation (it doesn't make sense to check the speed of an unoptimised
program).  You probably want to use the FPROF variable with the FFAST variable.

</BODY>
</HTML>
