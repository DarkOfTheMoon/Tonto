<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Function arguments</title><link rel="stylesheet" href="../tonto.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.64.1"><link rel="home" href="index.html" title="Tonto"><link rel="up" href="foo-modules.html" title="Chapter 12. Writing foo modules for TONTO"><link rel="previous" href="large-modules.html" title="Large modules"><link rel="next" href="run-xxxx.html" title="Writing the main run_XXXX program"><meta name="robots" content="noindex,nofollow"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="large-modules.html">Prev</a> </td><th width="60%" align="center"></th><td width="20%" align="right"> <a accesskey="n" href="run-xxxx.html">Next</a></td></tr></table><IMG SRC="../hr.png" HEIGHT="10" WIDTH="100%"><BR></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="function-arguments"></a>Function arguments</h2></div></div><div></div></div><P>Sometimes you may want to design routines which takes as its first
argument a function as an argument.</P><P>Currently, such functions are placed in the module according to the type
of argument the function returns, and these arguments are marked as
<tt class="literal">[routinal]</tt>.  What that means is that the first argument is
<span class="emphasis"><em>not</em></span> assumed to be of the type contained inthe module, but
must be specified manually, say by an interface specification. For an example,
see the <tt class="literal">minimise_brent</tt> routine in the <tt class="literal">REAL</tt>
module.</P><P>Usually, such routinals are used in conjunction with a routine with the
<tt class="literal">[selfless]</tt> attribute.  Selfless routines are those whose
first argument is <span class="emphasis"><em>not</em></span> the <tt class="literal">self</tt> argument
of type contained in the module. Instead, the <tt class="literal">self</tt> variable
is set at the first line of the selfless routine to be equal to a
<tt class="literal">saved_self</tt> variable which is globally visible within the
module. In this was, a selfless routine can be passed to a routinal (typically a
minimiser) which then calls the passed routine during the course of its
execution. The called selfless routine can have access to the current
<tt class="literal">self</tt> variable. In this way, a function and some of its
arguments can be passed to a minimiser. In some languages this is called
&#8220;<span class="quote">closure</span>&#8221;.  For an example, see the <tt class="literal">chi2</tt>
selfless routine in the <tt class="literal">CRSYTAL</tt> module.</P><P>Compilers are not often able to cope with this mechanism, so
unfortunately, it is rarely used.</P><P>Currently, there is no convention in TONTO on which module to place
routines which take subroutines as their first argument. Such routines are not
encountered in TONTO.</P></div><div class="navfooter"><IMG SRC="../hr.png" HEIGHT="10" WIDTH="100%"><BR><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="large-modules.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="foo-modules.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="run-xxxx.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Large modules </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Writing the main run_XXXX program</td></tr></table></div></body></html>
