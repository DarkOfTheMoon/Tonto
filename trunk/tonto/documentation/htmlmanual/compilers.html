<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
  <META name="robots" content="noindex, nofollow">
  <TITLE>Compiler options</TITLE>
</HEAD>
 
<BODY BGCOLOR="#FFFBF0">

<H1><A NAME="compilers">Compilers</A></H1>

<P>Most compilers require the following options in the site_config file to work
with TONTO:
<UL>

<P>
<LI>
Where to find the files.  Most compilers use the same flags;<BR>
-I. -I./f90 -I./modules -I./interfaces -I./objects
</LI>

<P>
<LI>
To use the C preprocessor on the files.<BR>
-Cpp
</LI>

<P>
<LI>
Where to store the module files.
<TABLE COLS=2>
<TR>
<TD WIDTH=200>-Am -M./new_modules</TD>
<TD WIDTH=100>Fujitsu</TD>
</TR>
<TR>
<TD>-module ./new_modules</TD>
<TD>DEC, Compaq</TD>
</TR>
<TR>
<TD>-qmoddir=./new_modules</TD>
<TD>IBM</TD>
</TR>
</TABLE>
</LI>

</UL>

<H3><A NAME="errors">Compiler errors</A></H3>

<P>A compiler error occurs during the build process when your Fortran compiler
sees some code it does not understand, or it cannot find a file.<BR>
This usually occurs during the "make install" process.

<P>We cannot possibly list all compiler errors and solutions, but here are a
few examples with the Fujitsu compiler:

<UL>

<P>
<LI>The compiler is not told the correct directory to output modules to.<BR>
Use the correct option in the FFLAGS section of the site_config file.

<PRE>
Error: module file new_modules/types.mod does not exist!
</PRE>
</LI>

<P>
<LI>Here are some cases where the C preprocessor has not been used with the 
compiler.<BR>
The solution to this is to add the appropriate C preprocessor option to the
FFLAGS in the site_config file.

<PRE>
Fortran diagnostic messages: program name(TYPES)
  jwd1302i-s  "f90/types.f90", line 18: Not a valid FORTRAN statement.
  jwd1600i-s  "f90/types.f90", line 21: No component defined in derived type def
inition for system_type.
</PRE>

<PRE>
f90: Warning: f90/types.f90, line 18: Bad # preprocessor line
#  include "macros"
---^
</PRE>
</LI>

<P>
<LI>Here the compiler cannot find the interface files.<BR>
The solution to this is to add -I./interfaces to the FFLAGS in the site_config
file.
<PRE>
"f90/system.f90", line 34: error: #include: cannot find file "system.int"
</PRE>
<PRE>
/lib/cpp: Error: f90/system.f90: 34: Cannot open file system.int for #includef
</PRE>
</LI>

<P>
<LI>Here the compiler cannot find the types module.<BR>
The Fujitsu compiler requires -Am as well as -M./new_modules when compiling
modules.<BR>
Add this to the FFLAGS section of the site_config file.
<PRE>
Fortran diagnostic messages: program name(SYSTEM)
  jwd1370i-s  "f90/system.f90", line 29: Module TYPES is not available.
</PRE>
</LI>

<P>
<LI>The math libraries in this case are not specified.<BR>
Add the correct -l option(s) to the FFLAGS section of the site_config file.<BR>
eg, -lblas -llapack if using the Lapack library.
<PRE>
objects/mat.o: In function `mat.solve_symmetric_eigenproblem_':
objects/mat.o(.text+0x6309): undefined reference to `dsyev_'
objects/mat.o: In function `mat.solve_linear_equations_':
objects/mat.o(.text+0x6eb0): undefined reference to `dgesv_'
</PRE>
</LI>

<P>
<LI>An object file is corrupt.<BR>
Delete the particular object file and try again.
<PRE>
ld:
Can't read file: objects/mol_daniel.o (Error 0)
f95: Severe: Failed while trying to link.
</PRE>
</LI>

</UL>

<P>If you cannot work out what is causing your error, please contact us and we
will try to help.

</BODY>
</HTML>
