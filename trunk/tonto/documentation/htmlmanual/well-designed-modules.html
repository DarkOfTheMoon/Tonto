<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Principles for well designed modules</title><link rel="stylesheet" href="../tonto.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.64.1"><link rel="home" href="index.html" title="Tonto"><link rel="up" href="foo-modules.html" title="Chapter 12. Writing foo modules for TONTO"><link rel="previous" href="write-conventional-routines.html" title="The conventional routines"><link rel="next" href="large-modules.html" title="Large modules"><meta name="robots" content="noindex,nofollow"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="write-conventional-routines.html">Prev</a> </td><th width="60%" align="center"></th><td width="20%" align="right"> <a accesskey="n" href="large-modules.html">Next</a></td></tr></table><IMG SRC="../hr.png" HEIGHT="10" WIDTH="100%"><BR></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="well-designed-modules"></a>Principles for well designed modules</h2></div></div><div></div></div><P>Here are some golden rules for designing a module in the TONTO
style.</P><div class="itemizedlist"><ul type="disc"><li><P><span class="emphasis"><em>Document before writing</em></span>. It is highly
recommended that you fully document the functions and routines that you want to
include in your module, including their arguments, <span class="emphasis"><em>before</em></span>
you start any coding.  Often, if the plan of attack is clearly specified before
any coding proper is completed, bugs are less prevalent.</P></li><li><P><span class="emphasis"><em>Insert the type definition (commented out) at the
start of the module</em></span>.  This is required for documentation purposes.
The reason the type does not appear in the module itself is because we wish
<span class="emphasis"><em>all</em></span> modules to have access to the internals of a type. In
C++ parlance, all TONTO modules are friendly.</P></li><li><P><span class="emphasis"><em>Use long decriptive names</em></span>. Most of the
effort in documentation can be made easier if you use descriptive names for
routines and variables. Please, spend some time on this.</P></li><li><P><span class="emphasis"><em>Ensure routines have few arguments</em></span>.
Routines that have few, if any, arguments are easier to remember and easier to
use.</P></li><li><P><span class="emphasis"><em>Write simple routines</em></span>. Is there more to be
said?</P></li><li><P><span class="emphasis"><em>Write short routines</em></span>. There isn't really
any reason to write a long routine; a long routine can be separated into
separate tasks for the current module, or farmed out to tasks belonging to other
modules.</P></li><li><P><span class="emphasis"><em>Use preconditions liberally</em></span>. When
developing, it is highly recomended that you use the
<tt class="literal">-DUSE_PER_AND_POST_CONDITIONS</tt> switch and the
<tt class="literal">-DUSE_CALL_STACK_MANAGEMENT</tt>
switch. By the same token, make sure you include before the start of a routine a 
a set of <tt class="literal">ENSURE</tt> commands which will detect any missing data
or incorrect conditions required for the routine to perform its task. Remember,
these can eventually be switched off and you will pay no performance penalty,
but you will get the productivity gain in fewer bugs.</P></li><li><P><span class="emphasis"><em>Mark routines <tt class="literal">[leaky]</tt></em></span>.
It is useful to keep track of where your memory is going. Spend some time to
reduce the number of routines which deliberately have memory leaks, and for
those where leaks are unavoidable, mark them as
<tt class="literal">[leaky]</tt>.</P></li><li><P><span class="emphasis"><em>Add functionality to low-level modules where
possible</em></span>. Try not to make your top-level routines too heavy. The more
you can place in lower level modules which are well decoupled, the faster will
be your compile times, and the quicker will your program be debugged, since
lower level routines are more exhaustively used.</P></li><li><P><span class="emphasis"><em>Do not remove your initial code; provide
redundancy</em></span>. Often your initial code is very sinmple and clear. Then
it becomes wrecked asyou make it more efficient.  Please do not delete your
initial simple code. Routine names can be overloaded, and when bugs are detected
your simple code will be invaulable in testing.</P></li><li><P><span class="emphasis"><em>Provide all the conventional routines</em></span>. They
will usually be needed at some stage.</P></li><li><P><span class="emphasis"><em>When using string case statements, use alphabetical
order</em></span>. You should also use the <tt class="literal">UNKNOWN(word)</tt> so
that when there is an error, and alphabetical list of allowed options is echoed
to the user.</P></li></ul></div></div><div class="navfooter"><IMG SRC="../hr.png" HEIGHT="10" WIDTH="100%"><BR><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="write-conventional-routines.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="foo-modules.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="large-modules.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">The conventional routines </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Large modules</td></tr></table></div></body></html>
