<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Pre-processor changes for array types</title><link rel="stylesheet" href="../tonto.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.64.1"><link rel="home" href="index.html" title="Tonto"><link rel="up" href="foo-modules.html" title="Chapter 12. Writing foo modules for TONTO"><link rel="previous" href="preprocessor-modifications.html" title="Modifying the foo pre-processor"><link rel="next" href="write-conventional-routines.html" title="The conventional routines"><meta name="robots" content="noindex,nofollow"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="preprocessor-modifications.html">Prev</a> </td><th width="60%" align="center"></th><td width="20%" align="right"> <a accesskey="n" href="write-conventional-routines.html">Next</a></td></tr></table><IMG SRC="../hr.png" HEIGHT="10" WIDTH="100%"><BR></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="array-type-modifications"></a>Pre-processor changes for array types</h2></div></div><div></div></div><P>Array types require additional modification of the pre-processor. </P><P>For a vector type, for example, we would define in the
<tt class="literal">macros</tt> file the following:
<table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
#define REALVEC(A)             ARRAY(REAL,A)
</pre></td></tr></table>
Similarly, for a <tt class="literal">BUFFERVEC</tt> type, representing a vector of
<tt class="literal">BUFFER</tt>'s we would define in the <tt class="literal">macros</tt> file
<table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
#define BUFFERVEC(A)             ARRAY(BUFFER,A)
</pre></td></tr></table>
This type does nopt currently exist in TONTO.</P><P>Array types also require a modification of the <tt class="literal">foo.perl</tt>
script.  You should tell the script what type of component each array holds. For
example, a <tt class="literal">REALVEC</tt> type hold an array where each element is a
<tt class="literal">REAL</tt> number
<table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
%component_type = (     # Components of the vector types
    'REALVEC'           =&gt; 'REAL',
</pre></td></tr></table>
If a <tt class="literal">BUFFERVEC</tt> types was defined, you would insert at the end
of the list in the <tt class="literal">foo.perl</tt> script
<table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
%component_type = (     # Components of the vector types
    'BUFFERVEC'     =&gt; 'BUFFER',
</pre></td></tr></table></P><P>For an array type, you must also tell the <tt class="literal">foo.perl</tt>
script how to convert assumed size arrays in type declarations. For example, for
a <tt class="literal">REALVEC</tt> type the following substitution must be effected
<table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
%subst = (          # Substitutions .................
      :
    'REALVEC '      =&gt; 'REALVEC(:) ',
      :
</pre></td></tr></table>
If a <tt class="literal">BUFFERVEC</tt> types was defined, you would insert at the end
of the list in the <tt class="literal">foo.perl</tt> script
<table border="0" bgcolor="#E0E0E0"><tr><td><pre class="programlisting">
    'BUFFERVEC ' =&gt; 'BUFFERVEC(:) ',
</pre></td></tr></table></P></div><div class="navfooter"><IMG SRC="../hr.png" HEIGHT="10" WIDTH="100%"><BR><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preprocessor-modifications.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="foo-modules.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="write-conventional-routines.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Modifying the foo pre-processor </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> The conventional routines</td></tr></table></div></body></html>
