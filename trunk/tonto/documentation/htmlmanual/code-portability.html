<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Machine specific code in TONTO</title><link rel="stylesheet" href="../tonto.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.64.1"><link rel="home" href="index.html" title="Tonto"><link rel="up" href="building-executables.html" title="Chapter 8. How TONTO builds executables"><link rel="previous" href="make.html" title="The make program and the Makefile"><link rel="next" href="make-dependencies.html" title="Code dependencies in TONTO"><meta name="robots" content="noindex,nofollow"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="make.html">Prev</a> </td><th width="60%" align="center"></th><td width="20%" align="right"> <a accesskey="n" href="make-dependencies.html">Next</a></td></tr></table><IMG SRC="../hr.png" HEIGHT="10" WIDTH="100%"><BR></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="code-portability"></a>Machine specific code in TONTO</h2></div></div><div></div></div><P>When generating code which can be used on many platforms, invariably there
are pieces of code which are needed only on certain platforms and not others.
For example, compiler options, which are contained in a
<tt class="literal">Makefile</tt> are specific to a platform.</P><P>TONTO uses a perl script <tt class="literal">Makefile.pl</tt> to generate
machine specfic files such as <tt class="literal">Makefiles</tt>. It also uses the C
preprocessor to make sure certain lines of code are compiled only for certain
machines.</P><P>This is the way it works:</P><P>In the top directory are files <tt class="literal">Makefile.pl</tt> and
<tt class="literal">Makefile.in</tt>. When you type <tt class="literal">perl -w
Makefile.pl</tt>, the perl script <tt class="literal">Makefile.pl</tt> is
executed to determine what kind of operating system you have, what kind of
compiler, and if everything you need to make TONTO is available. </P><P>Once this information is known, <tt class="literal">Makefile.pl</tt> decides the
correct <tt class="literal">site_config</tt> file to use by looking in the directory
<tt class="literal">site_config</tt> which contains a series of files for machine
specific compile options. <tt class="literal">Makefile.pl</tt> then includes the
appropriate machine specific compile-option file, and any other machine specific
information it knows about, into the generic template
<tt class="literal">Makefile.in</tt> to make the correct
<tt class="literal">Makefile</tt>.</P></div><div class="navfooter"><IMG SRC="../hr.png" HEIGHT="10" WIDTH="100%"><BR><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="make.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="building-executables.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="make-dependencies.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">The make program and the Makefile </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Code dependencies in TONTO</td></tr></table></div></body></html>
